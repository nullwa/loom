import { Meta, Markdown } from '@storybook/addon-docs/blocks'

<Meta title='helpers/color-accessibility' />

# color-accessibility

A set of utilities for working with colors and ensuring **WCAG-compliant contrast ratios**.  
Includes functions for parsing HEX colors, computing luminance, calculating contrast ratios, and evaluating compliance (AA / AAA).

## API

### `normalizeLuminance`

```ts
normalizeLuminance(channelValue: number): number
```

- **`channelValue`**: A single RGB channel value (0–255).
- **Returns**: The normalized luminance value for that channel.

### `parseHexToRgb`

```ts
parseHexToRgb(hexColorCode: string): [number, number, number]
```

- **`hexColorCode`**: A HEX color string (e.g., `"#ffffff"`).
- **Returns**: An `[R, G, B]` tuple (each 0–255).

### `computeLuminance`

```ts
computeLuminance(hexColorCode: string): number
```

- **`hexColorCode`**: A HEX color string.
- **Returns**: The relative luminance (0–1) following WCAG formula.

### `computeContrastRatio`

```ts
computeContrastRatio(foregroundColor: string, backgroundColor: string): number
```

- **`foregroundColor`**: HEX color string for foreground.
- **`backgroundColor`**: HEX color string for background.
- **Returns**: The **contrast ratio** (1–21).

### `evaluateCompliance`

```ts
evaluateCompliance(
  foregroundColor: string,
  backgroundColor: string
): {
  contrastRatio: string
  isAAACompliant: boolean
  isAACompliant: boolean
  isLargeTextAACompliant: boolean
}
```

- **`foregroundColor`**: HEX string for foreground.
- **`backgroundColor`**: HEX string for background.
- **Returns**:

  - `contrastRatio`: String (rounded to 1 decimal).
  - `isAAACompliant`: `true` if ratio ≥ 7.
  - `isAACompliant`: `true` if ratio ≥ 4.5.
  - `isLargeTextAACompliant`: `true` if ratio ≥ 3.

## Examples

#### <b>Example: Parse HEX</b>

```tsx
import { parseHexToRgb } from '@/utils/color-accessibility'

console.log(parseHexToRgb('#ff0000'))
// → [255, 0, 0]
```

#### <b>Example: Compute Luminance</b>

```tsx
import { computeLuminance } from '@/utils/color-accessibility'

console.log(computeLuminance('#ffffff'))
// → 1
```

#### <b>Example: Contrast Ratio</b>

```tsx
import { computeContrastRatio } from '@/utils/color-accessibility'

console.log(computeContrastRatio('#000000', '#ffffff'))
// → 21
```

#### <b>Example: WCAG Compliance</b>

```tsx
import { evaluateCompliance } from '@/utils/color-accessibility'

console.log(evaluateCompliance('#000000', '#ffffff'))
// → {
//     contrastRatio: "21.0",
//     isAAACompliant: true,
//     isAACompliant: true,
//     isLargeTextAACompliant: true
//   }
```

## Notes

- Based on **WCAG 2.1 formulas** for luminance and contrast.
- Ratios are between **1 (no contrast)** and **21 (max contrast)**.
- Recommended compliance thresholds:

  - **AAA**: ≥ 7
  - **AA (normal text)**: ≥ 4.5
  - **AA (large text)**: ≥ 3

✅ Use these utilities to **check accessibility of UI colors** and enforce WCAG contrast rules.
